# ç¬¬ä¸‰æ–¹æ•°æ®æºé›†æˆè§„åˆ’

## ğŸ¯ æ¦‚è¿°

ä¸ºäº†æé«˜æ•°æ®è´¨é‡å’Œè¦†ç›–èŒƒå›´ï¼Œæˆ‘ä»¬è®¡åˆ’é›†æˆå¤šä¸ªç¬¬ä¸‰æ–¹æ•°æ®æºï¼Œæä¾›æ›´å…¨é¢çš„åº”ç”¨å¸‚åœºæƒ…æŠ¥å’Œç«äº‰åˆ†æã€‚

## ğŸ“Š å½“å‰æ•°æ®æº

### ç°æœ‰æ¥æº
- **iOS App Store** - ç›´æ¥å®˜æ–¹API
- **Google Play Store** - Webçˆ¬è™« + å…¬å…±API

### ç°æœ‰ä¼˜åŠ¿
- å®æ—¶æ•°æ®è·å–
- å®Œæ•´çš„è¯„è®ºå†…å®¹
- è‡ªå®šä¹‰åˆ†æç®—æ³•
- æˆæœ¬å¯æ§

### ç°æœ‰é™åˆ¶
- æ•°æ®è·å–é€Ÿåº¦å—å®˜æ–¹é™åˆ¶
- éƒ¨åˆ†åœ°åŒºè®¿é—®é™åˆ¶
- ç¼ºä¹å†å²æ•°æ®å¯¹æ¯”
- ç¼ºå°‘å¸‚åœºè¶‹åŠ¿åˆ†æ

## ğŸš€ è®¡åˆ’é›†æˆçš„ç¬¬ä¸‰æ–¹æ•°æ®æº

### 1. AppFollowing API

**ç®€ä»‹**: AppFollowingæ˜¯ä¸“ä¸šçš„åº”ç”¨æ•°æ®åˆ†æå¹³å°ï¼Œæä¾›å…¨é¢çš„åº”ç”¨å¸‚åœºæ•°æ®ã€‚

**ä¼˜åŠ¿**:
- å…¨çƒåº”ç”¨å¸‚åœºæ•°æ®
- å†å²æ•°æ®è¿½è¸ª
- ä¸‹è½½é‡å’Œæ”¶å…¥ä¼°ç®—
- åº”ç”¨æ’åè¶‹åŠ¿
- ç”¨æˆ·ç”»åƒåˆ†æ

**é›†æˆæ–¹æ¡ˆ**:
```typescript
// lib/data-sources/appfollowing.ts
interface AppFollowingData {
  appId: string;
  downloads: {
    daily: number[];
    monthly: number[];
    total: number;
  };
  revenue: {
    daily: number[];
    monthly: number[];
    total: number;
  };
  rankings: {
    country: string;
    category: string;
    position: number;
    date: string;
  }[];
  demographics: {
    age: string[];
    gender: string[];
    location: string[];
  };
}

class AppFollowingClient {
  private apiKey: string;
  private baseUrl = 'https://api.appfollowing.com/v1';

  constructor(apiKey: string) {
    this.apiKey = apiKey;
  }

  async getAppData(appId: string, platform: 'ios' | 'android'): Promise<AppFollowingData> {
    const response = await fetch(`${this.baseUrl}/apps/${platform}/${appId}`, {
      headers: {
        'Authorization': `Bearer ${this.apiKey}`,
      },
    });
    return response.json();
  }
}
```

**æ•°æ®ç”¨é€”**:
- å¸‚åœºè¡¨ç°åˆ†æ
- ä¸‹è½½é‡è¶‹åŠ¿è¿½è¸ª
- ç«äº‰å¯¹æ‰‹ç›‘æ§
- åœ°åŒºè¡¨ç°åˆ†æ

### 2. Data.ai (åŸåSensor Tower) é›†æˆ

**ç®€ä»‹**: Data.aiæ˜¯ç§»åŠ¨åº”ç”¨æƒ…æŠ¥é¢†åŸŸçš„é¢†å¯¼è€…ï¼Œæä¾›æ·±åº¦çš„å¸‚åœºåˆ†æå’Œç«äº‰æƒ…æŠ¥ã€‚

**ä¼˜åŠ¿**:
- è¯¦ç»†çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®
- åº”ç”¨ä½¿ç”¨æ—¶é•¿ç»Ÿè®¡
- ç”¨æˆ·ç•™å­˜ç‡åˆ†æ
- å¸‚åœºä»½é¢æ•°æ®
- å¹¿å‘Šæ”¶å…¥ä¼°ç®—

**é›†æˆæ–¹æ¡ˆ**:
```typescript
// lib/data-sources/dataai.ts
interface DataAIData {
  appUsage: {
    dailyActiveUsers: number;
    monthlyActiveUsers: number;
    averageSessionTime: number;
    retentionRate: {
      day1: number;
      day7: number;
      day30: number;
    };
  };
  marketShare: {
    category: string;
    percentage: number;
    ranking: number;
  };
  revenue: {
    inApp: number;
    advertising: number;
    subscriptions: number;
  };
  demographics: {
    ageGroups: Record<string, number>;
    genderDistribution: Record<string, number>;
    topCountries: Array<{country: string; percentage: number}>;
  };
}

class DataAIClient {
  private apiKey: string;
  private baseUrl = 'https://api.data.ai/v1';

  constructor(apiKey: string) {
    this.apiKey = apiKey;
  }

  async getAppInsights(appId: string, platform: 'ios' | 'android'): Promise<DataAIData> {
    const response = await fetch(`${this.baseUrl}/insights/${platform}/${appId}`, {
      headers: {
        'X-API-Key': this.apiKey,
      },
    });
    return response.json();
  }
}
```

### 3. 42matters API

**ç®€ä»‹**: 42mattersæä¾›åº”ç”¨å¸‚åœºæ•°æ®å’Œç«äº‰å¯¹æ‰‹æƒ…æŠ¥ã€‚

**ä¼˜åŠ¿**:
- åº”ç”¨å•†åº—æƒ…æŠ¥
- ç«äº‰å¯¹æ‰‹åˆ†æ
å¸‚åœºè¶‹åŠ¿æ•°æ®
- åº”ç”¨åŠŸèƒ½å¯¹æ¯”

### 4. App Annie API

**ç®€ä»‹**: App Annieï¼ˆç°ç§°data.aiï¼‰æ˜¯åº”ç”¨åˆ†æå¹³å°ã€‚

**ä¼˜åŠ¿**:
- åº”ç”¨ä¸‹è½½é‡ç»Ÿè®¡
- ç”¨æˆ·å‚ä¸åº¦æ•°æ®
- åº”ç”¨æ€§èƒ½æŒ‡æ ‡

## ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### ç»Ÿä¸€æ•°æ®æ¥å£

```typescript
// lib/data-sources/unified.ts
interface DataSource {
  name: string;
  priority: number;
  available: boolean;
}

interface UnifiedAppData {
  basicInfo: {
    name: string;
    category: string;
    developer: string;
    description: string;
    icon: string;
    screenshots: string[];
  };
  performance: {
    downloads: {
      daily: number;
      monthly: number;
      total: number;
    };
    revenue: {
      monthly: number;
      total: number;
    };
    rankings: Array<{
      country: string;
      category: string;
      position: number;
    }>;
  };
  engagement: {
    dailyActiveUsers: number;
    monthlyActiveUsers: number;
    averageSessionTime: number;
    retentionRate: {
      day1: number;
      day7: number;
      day30: number;
    };
  };
  demographics: {
    ageDistribution: Record<string, number>;
    genderDistribution: Record<string, number>;
    topCountries: Array<{country: string; percentage: number}>;
  };
}

class UnifiedDataService {
  private sources: DataSource[] = [];
  private cache = new Map<string, { data: UnifiedAppData; timestamp: number }>();

  constructor() {
    this.initializeSources();
  }

  private initializeSources() {
    // æŒ‰ä¼˜å…ˆçº§é¡ºåºåˆå§‹åŒ–æ•°æ®æº
    this.sources = [
      { name: 'official', priority: 1, available: true },
      { name: 'appfollowing', priority: 2, available: !!process.env.APPFOLLOWING_API_KEY },
      { name: 'dataai', priority: 3, available: !!process.env.DATA_AI_API_KEY },
      { name: '42matters', priority: 4, available: !!process.env.FORTY_TWO_MATTERS_API_KEY },
    ];
  }

  async getUnifiedAppData(
    appId: string,
    platform: 'ios' | 'android'
  ): Promise<UnifiedAppData> {
    const cacheKey = `${platform}:${appId}`;
    const cached = this.cache.get(cacheKey);

    if (cached && Date.now() - cached.timestamp < 24 * 60 * 60 * 1000) {
      return cached.data;
    }

    const data: Partial<UnifiedAppData> = {};

    // æŒ‰ä¼˜å…ˆçº§é¡ºåºå°è¯•æ•°æ®æº
    for (const source of this.sources.sort((a, b) => a.priority - b.priority)) {
      if (!source.available) continue;

      try {
        const sourceData = await this.fetchFromSource(source.name, appId, platform);
        this.mergeData(data, sourceData);
      } catch (error) {
        console.warn(`Failed to fetch from ${source.name}:`, error);
      }
    }

    const unifiedData = this.validateAndNormalizeData(data);
    this.cache.set(cacheKey, { data: unifiedData, timestamp: Date.now() });

    return unifiedData;
  }

  private async fetchFromSource(
    source: string,
    appId: string,
    platform: 'ios' | 'android'
  ): Promise<Partial<UnifiedAppData>> {
    switch (source) {
      case 'official':
        return this.fetchOfficialData(appId, platform);
      case 'appfollowing':
        return this.fetchAppFollowingData(appId, platform);
      case 'dataai':
        return this.fetchDataAiData(appId, platform);
      case '42matters':
        return this.fetch42mattersData(appId, platform);
      default:
        throw new Error(`Unknown data source: ${source}`);
    }
  }

  private mergeData(target: Partial<UnifiedAppData>, source: Partial<UnifiedAppData>) {
    // æ™ºèƒ½åˆå¹¶é€»è¾‘ï¼Œä¼˜å…ˆä½¿ç”¨æ›´å‡†ç¡®çš„æ•°æ®æº
    if (source.basicInfo) {
      target.basicInfo = { ...target.basicInfo, ...source.basicInfo };
    }
    if (source.performance) {
      target.performance = { ...target.performance, ...source.performance };
    }
    if (source.engagement) {
      target.engagement = { ...target.engagement, ...source.engagement };
    }
    if (source.demographics) {
      target.demographics = { ...target.demographics, ...source.demographics };
    }
  }

  private validateAndNormalizeData(data: Partial<UnifiedAppData>): UnifiedAppData {
    // æ•°æ®éªŒè¯å’Œæ ‡å‡†åŒ–
    return {
      basicInfo: data.basicInfo || this.getDefaultBasicInfo(),
      performance: data.performance || this.getDefaultPerformance(),
      engagement: data.engagement || this.getDefaultEngagement(),
      demographics: data.demographics || this.getDefaultDemographics(),
    };
  }
}
```

### æ•°æ®åŒæ­¥ç­–ç•¥

```typescript
// lib/data-sources/sync.ts
class DataSyncService {
  private syncQueue: Array<{appId: string; platform: 'ios' | 'android'}> = [];
  private isProcessing = false;

  constructor() {
    // å¯åŠ¨å®šæœŸåŒæ­¥
    this.startPeriodicSync();
  }

  async enqueueSync(appId: string, platform: 'ios' | 'android') {
    this.syncQueue.push({ appId, platform });
    if (!this.isProcessing) {
      this.processQueue();
    }
  }

  private async processQueue() {
    this.isProcessing = true;

    while (this.syncQueue.length > 0) {
      const { appId, platform } = this.syncQueue.shift()!;

      try {
        await this.syncAppData(appId, platform);
      } catch (error) {
        console.error(`Failed to sync ${appId}:`, error);
      }

      // é¿å…APIé™åˆ¶ï¼Œæ·»åŠ å»¶è¿Ÿ
      await new Promise(resolve => setTimeout(resolve, 1000));
    }

    this.isProcessing = false;
  }

  private async syncAppData(appId: string, platform: 'ios' | 'android') {
    const unifiedService = new UnifiedDataService();
    const data = await unifiedService.getUnifiedAppData(appId, platform);

    // å­˜å‚¨åˆ°æ•°æ®åº“
    await this.storeAppData(appId, platform, data);

    // è§¦å‘ç›¸å…³åˆ†ææ›´æ–°
    await this.triggerAnalysisUpdate(appId, platform);
  }

  private startPeriodicSync() {
    // æ¯å¤©åŒæ­¥ä¸€æ¬¡çƒ­é—¨åº”ç”¨æ•°æ®
    setInterval(async () => {
      await this.syncPopularApps();
    }, 24 * 60 * 60 * 1000);
  }

  private async syncPopularApps() {
    // è·å–çƒ­é—¨åº”ç”¨åˆ—è¡¨å¹¶åŒæ­¥
    const popularApps = await this.getPopularApps();

    for (const app of popularApps) {
      await this.enqueueSync(app.appId, app.platform);
    }
  }
}
```

## ğŸ“Š æ•°æ®å¢å¼ºåŠŸèƒ½

### 1. å¸‚åœºè¶‹åŠ¿åˆ†æ

```typescript
// lib/analytics/market-trends.ts
interface MarketTrend {
  period: string;
  categoryGrowth: Record<string, number>;
  topGainingApps: Array<{
    appId: string;
    growth: number;
    downloads: number;
  }>;
  revenueTrends: {
    total: number;
    byCategory: Record<string, number>;
  };
}

class MarketTrendAnalyzer {
  async analyzeCategoryTrends(category: string, period: '30d' | '90d' | '1y'): Promise<MarketTrend> {
    // æ•´åˆå¤šæ•°æ®æºåˆ†æå¸‚åœºè¶‹åŠ¿
  }
}
```

### 2. ç«äº‰å¯¹æ‰‹ç›‘æ§

```typescript
// lib/analytics/competitor-monitor.ts
class CompetitorMonitor {
  async trackCompetitorMetrics(appIds: string[]): Promise<CompetitorMetrics[]> {
    // æŒç»­ç›‘æ§ç«äº‰å¯¹æ‰‹è¡¨ç°
  }

  async generateCompetitiveAnalysis(
    appId: string,
    competitorIds: string[]
  ): Promise<CompetitiveAnalysis> {
    // ç”Ÿæˆç«äº‰åˆ†ææŠ¥å‘Š
  }
}
```

### 3. é¢„æµ‹åˆ†æ

```typescript
// lib/analytics/predictive.ts
class PredictiveAnalytics {
  async predictAppPerformance(
    appId: string,
    timeframe: '30d' | '90d' | '6m'
  ): Promise<PerformancePrediction> {
    // åŸºäºå†å²æ•°æ®é¢„æµ‹åº”ç”¨è¡¨ç°
  }

  async estimateMarketSize(category: string): Promise<MarketSizeEstimate> {
    // ä¼°ç®—å¸‚åœºè§„æ¨¡
  }
}
```

## ğŸ’° æˆæœ¬åˆ†æ

### æ•°æ®æºæˆæœ¬å¯¹æ¯”

| æ•°æ®æº | æœˆæˆæœ¬ | æ•°æ®è¦†ç›– | æ›´æ–°é¢‘ç‡ | APIé™åˆ¶ |
|--------|--------|----------|----------|---------|
| å®˜æ–¹API | $0 | åŸºç¡€ | å®æ—¶ | é™åˆ¶è¾ƒä¸¥ |
| AppFollowing | $299/æœˆ | å…¨é¢ | æ¯æ—¥ | 10ä¸‡è¯·æ±‚ |
| Data.ai | $999/æœˆ | æ·±åº¦ | æ¯æ—¥ | 50ä¸‡è¯·æ±‚ |
| 42matters | $199/æœˆ | ä¸­ç­‰ | æ¯æ—¥ | 5ä¸‡è¯·æ±‚ |

### æˆæœ¬ä¼˜åŒ–ç­–ç•¥

1. **æ™ºèƒ½ç¼“å­˜**: å‡å°‘é‡å¤APIè°ƒç”¨
2. **åˆ†å±‚è·å–**: æ ¹æ®ç”¨æˆ·éœ€æ±‚è·å–ä¸åŒæ·±åº¦çš„æ•°æ®
3. **æ‰¹é‡å¤„ç†**: æ‰¹é‡è·å–å¤šä¸ªåº”ç”¨æ•°æ®
4. **å¼‚æ­¥æ›´æ–°**: åå°å¼‚æ­¥æ›´æ–°æ•°æ®ï¼Œé¿å…é˜»å¡ç”¨æˆ·è¯·æ±‚

## ğŸ—“ï¸ å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€é›†æˆ (4-6å‘¨)
- [ ] AppFollowing APIé›†æˆ
- [ ] ç»Ÿä¸€æ•°æ®æ¥å£è®¾è®¡
- [ ] åŸºç¡€ç¼“å­˜æœºåˆ¶
- [ ] æ•°æ®è´¨é‡éªŒè¯

### ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ (6-8å‘¨)
- [ ] Data.ai APIé›†æˆ
- [ ] å¸‚åœºè¶‹åŠ¿åˆ†æ
- [ ] ç«äº‰å¯¹æ‰‹ç›‘æ§
- [ ] é¢„æµ‹åˆ†æåŠŸèƒ½

### ç¬¬ä¸‰é˜¶æ®µï¼šä¼˜åŒ–æ‰©å±• (4-6å‘¨)
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æˆæœ¬æ§åˆ¶
- [ ] ç”¨æˆ·ç•Œé¢å‡çº§
- [ ] æŠ¥å‘Šç”ŸæˆåŠŸèƒ½

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- APIå“åº”æ—¶é—´ < 500ms
- æ•°æ®åŒæ­¥æˆåŠŸç‡ > 99%
- ç¼“å­˜å‘½ä¸­ç‡ > 80%
- ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%

### ä¸šåŠ¡æŒ‡æ ‡
- æ•°æ®å‡†ç¡®æ€§ > 95%
- æ•°æ®è¦†ç›–èŒƒå›´å¢åŠ  300%
- ç”¨æˆ·æ»¡æ„åº¦æå‡ 25%
- ç«äº‰åˆ†ææ·±åº¦æå‡ 200%

## ğŸš€ é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
- APIç¨³å®šæ€§ä¾èµ–
- æ•°æ®æ ¼å¼å˜åŒ–
- æœåŠ¡å¯ç”¨æ€§é£é™©

### ä¸šåŠ¡é£é™©
- æˆæœ¬æ§åˆ¶é£é™©
- åˆè§„æ€§è¦æ±‚
- ç«äº‰å¯¹æ‰‹å…³ç³»

### ç¼“è§£ç­–ç•¥
- å¤šæ•°æ®æºå¤‡ä»½
- å®æ—¶ç›‘æ§å‘Šè­¦
- åˆè§„æ€§å®¡æŸ¥
- æˆæœ¬é¢„ç®—æ§åˆ¶

---

é€šè¿‡è¿™äº›ç¬¬ä¸‰æ–¹æ•°æ®æºçš„é›†æˆï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›æ›´å…¨é¢ã€æ›´æ·±å…¥çš„åº”ç”¨å¸‚åœºåˆ†æå’Œç«äº‰æƒ…æŠ¥ï¼Œæ˜¾è‘—æå‡äº§å“ä»·å€¼ã€‚