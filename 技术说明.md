# ğŸ“™ App Review Analyzer - æŠ€æœ¯è¯´æ˜

> æŠ€æœ¯æ¶æ„ã€è®¾è®¡å†³ç­–ã€å®ç°ç»†èŠ‚

---

## ğŸ“‹ ç›®å½•

1. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
2. [URL ç­–ç•¥è®¾è®¡](#url-ç­–ç•¥è®¾è®¡)
3. [AI æ¨¡å‹é…ç½®](#ai-æ¨¡å‹é…ç½®)
4. [æ•°æ®æŠ“å–æ–¹æ¡ˆ](#æ•°æ®æŠ“å–æ–¹æ¡ˆ)
5. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
6. [API æ¥å£è®¾è®¡](#api-æ¥å£è®¾è®¡)
7. [ç¼“å­˜ç­–ç•¥](#ç¼“å­˜ç­–ç•¥)
8. [æœªæ¥åŠŸèƒ½è§„åˆ’](#æœªæ¥åŠŸèƒ½è§„åˆ’)

---

## æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend (Next.js)                 â”‚
â”‚  - React Components                             â”‚
â”‚  - Tailwind CSS Styling                         â”‚
â”‚  - Client-side State Management                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ HTTP/JSON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Backend (Next.js API Routes)           â”‚
â”‚  - /api/analyze (å•åº”ç”¨åˆ†æ)                     â”‚
â”‚  - /api/compare (ç«å“å¯¹æ¯”)                       â”‚
â”‚  - /api/export  (å¯¼å‡ºæŠ¥å‘Š)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚
       â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Scrapers  â”‚       â”‚  AI Engine  â”‚
â”‚  - App Storeâ”‚       â”‚  OpenRouter â”‚
â”‚  - Google Playâ”‚     â”‚  - Claude   â”‚
â”‚            â”‚       â”‚  - GPT-4    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Database (PostgreSQL)         â”‚
â”‚       - Apps                        â”‚
â”‚       - Reviews                     â”‚
â”‚       - Analysis Tasks              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| **å‰ç«¯æ¡†æ¶** | Next.js 14 | æœåŠ¡ç«¯æ¸²æŸ“ + è·¯ç”± |
| **UI åº“** | React 18 | ç»„ä»¶åŒ–å¼€å‘ |
| **æ ·å¼** | Tailwind CSS | åŸå­åŒ– CSS |
| **å›¾æ ‡** | Lucide React | UI å›¾æ ‡ |
| **è¯­è¨€** | TypeScript | ç±»å‹å®‰å…¨ |
| **åç«¯æ¡†æ¶** | Next.js API Routes | RESTful API |
| **ORM** | Prisma 5 | æ•°æ®åº“æ“ä½œ |
| **æ•°æ®åº“** | PostgreSQL | å…³ç³»å‹æ•°æ®åº“ |
| **AI å¹³å°** | OpenRouter | å¤šæ¨¡å‹èšåˆ |
| **æ•°æ®æŠ“å–** | google-play-scraper, rss-parser | è¯„è®ºæ•°æ® |
| **éƒ¨ç½²** | Vercel | å…¨æ ˆæ‰˜ç®¡ |

---

## URL ç­–ç•¥è®¾è®¡

### è®¾è®¡ç›®æ ‡

1. **SEO å‹å¥½** - ç®€çŸ­ã€å¯è¯»ã€åŒ…å«å…³é”®è¯
2. **ç”¨æˆ·å‹å¥½** - æ˜“è®°ã€æ˜“åˆ†äº«
3. **ç¨³å®šæ€§** - åŒä¸€åº”ç”¨ URL ä¸å˜
4. **å”¯ä¸€æ€§** - ä¸åŒåº”ç”¨ä¸å†²çª

### å®ç°æ–¹æ¡ˆï¼šæ–¹æ¡ˆCï¼ˆç®€æ´ä¼˜å…ˆï¼‰

#### URL æ ¼å¼

```
/analysis/{app-name}-{platform}
```

**ç¤ºä¾‹ï¼š**
```
Instagram (iOS)      â†’ /analysis/instagram-ios
TikTok (Android)     â†’ /analysis/tiktok-android
Instagram Lite       â†’ /analysis/instagram-lite-android
Slack: Team Chat     â†’ /analysis/slack-ios
```

#### ç”Ÿæˆç®—æ³•

```typescript
// src/lib/slug.ts
export function generateAppSlug(
  appName: string, 
  platform: 'ios' | 'android'
): string {
  const normalized = appName
    .toLowerCase()
    .trim()
    .split(':')[0]              // ç§»é™¤å†’å·åçš„å†…å®¹
    .replace(/[^a-z0-9\s]/g, '') // ç§»é™¤ç‰¹æ®Šå­—ç¬¦
    .replace(/\s+/g, '-')        // ç©ºæ ¼è½¬è¿å­—ç¬¦
    .replace(/^-+|-+$/g, '')     // ç§»é™¤é¦–å°¾è¿å­—ç¬¦
    .substring(0, 50);           // é™åˆ¶é•¿åº¦
  
  return `${normalized}-${platform}`;
}
```

#### å”¯ä¸€æ€§ä¿è¯

**URL å±‚é¢ï¼š** ç®€çŸ­æ˜“è¯»ï¼ˆç»™ç”¨æˆ·çœ‹ï¼‰
```
appSlug: "instagram-android"
```

**æ•°æ®åº“å±‚é¢ï¼š** å®Œæ•´æ ‡è¯†ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
```sql
platform: "android"
appStoreId: "com.instagram.android"

-- è”åˆå”¯ä¸€ç´¢å¼•
@@index([platform, appStoreId, createdAt])
```

#### å†²çªå¤„ç†

**åœºæ™¯ 1ï¼šåŒååº”ç”¨**
```
Instagram           â†’ instagram-android
Instagram Lite      â†’ instagram-lite-android (è‡ªåŠ¨åŒºåˆ†)
Instagram Business  â†’ instagram-business-android
```

**åœºæ™¯ 2ï¼šå¤šæ¬¡åˆ†æåŒä¸€åº”ç”¨**
```sql
-- æ•°æ®åº“ä¸­å¯ä»¥æœ‰å¤šæ¡è®°å½•ï¼Œä½† URL ç›¸åŒ
id: uuid-1, appSlug: "instagram-android", createdAt: 2025-01-01
id: uuid-2, appSlug: "instagram-android", createdAt: 2025-01-02

-- æŸ¥è¯¢æ—¶è¿”å›æœ€æ–°çš„
WHERE appSlug = "instagram-android" 
  AND isLatest = true 
ORDER BY createdAt DESC
LIMIT 1
```

#### å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆ

| æ–¹æ¡ˆ | ç¤ºä¾‹ URL | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|------|---------|------|------|
| **UUID** | `/analysis/a1b2c3d4-...` | ç»å¯¹å”¯ä¸€ | âŒ ä¸å¯è¯»<br/>âŒ ä¸åˆ© SEO |
| **åŒ…å« App ID** | `/analysis/instagram-android-com.instagram.android` | å®Œå…¨å”¯ä¸€ | âŒ å¤ªé•¿<br/>âŒ ä¸ç¾è§‚ |
| **ç®€æ´ç‰ˆï¼ˆå½“å‰ï¼‰** | `/analysis/instagram-android` | âœ… ç®€çŸ­<br/>âœ… å¯è¯»<br/>âœ… SEO å‹å¥½ | éœ€è¦æ•°æ®åº“ä¿è¯å”¯ä¸€æ€§ |

---

## AI æ¨¡å‹é…ç½®

### OpenRouter æ¶æ„

#### ä¸ºä»€ä¹ˆé€‰æ‹© OpenRouterï¼Ÿ

| ç‰¹æ€§ | OpenRouter | ç›´æ¥è°ƒç”¨å®˜æ–¹ API |
|------|-----------|----------------|
| **ç»Ÿä¸€æ¥å£** | âœ… ä¸€ä¸ª API è°ƒç”¨æ‰€æœ‰æ¨¡å‹ | âŒ æ¯ä¸ªæ¨¡å‹ä¸åŒæ¥å£ |
| **ä»·æ ¼ä¼˜åŠ¿** | âœ… æ‰¹é‡æŠ˜æ‰£ | - å®˜æ–¹ä»·æ ¼ |
| **å¯ç”¨æ€§** | âœ… é«˜å¯ç”¨è´Ÿè½½å‡è¡¡ | - ä¾èµ–å•ä¸€ä¾›åº”å•† |
| **çµæ´»åˆ‡æ¢** | âœ… éšæ—¶åˆ‡æ¢æ¨¡å‹ | âŒ éœ€è¦ä¿®æ”¹ä»£ç  |
| **å›½å†…è®¿é—®** | âœ… ç›¸å¯¹ç¨³å®š | âŒ å¯èƒ½è¢«å° |

### æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | æä¾›å•† | ä»·æ ¼ï¼ˆè¾“å…¥/è¾“å‡ºï¼‰ | ç”¨é€” | æ¨èåœºæ™¯ |
|------|--------|------------------|------|---------|
| **Claude 3.5 Sonnet** | Anthropic | $3/$15 per 1M tokens | ä¸»åŠ›æ¨¡å‹ | é«˜è´¨é‡åˆ†æ |
| **GPT-4o** | OpenAI | $2.5/$10 per 1M tokens | å¤‡é€‰æ¨¡å‹ | å¤šè¯­è¨€åœºæ™¯ |
| **DeepSeek V3** | DeepSeek | $0.27/$1.1 per 1M tokens | æˆæœ¬ä¼˜åŒ– | å¤§è§„æ¨¡åˆ†æ |
| **GLM-4** | Zhipu AI | $0.1/$0.1 per 1M tokens | ä¸­æ–‡ä¼˜åŒ– | ä¸­æ–‡è¯„è®º |

### AI åˆ†ææµç¨‹

```typescript
// src/lib/ai/openrouter.ts
export async function analyzeSingleApp(reviews: Review[]) {
  const prompt = `
    Analyze these app reviews and extract:
    1. Sentiment distribution (positive/neutral/negative %)
    2. Critical issues (top 5 problems users complain about)
    3. Experience issues (UX problems)
    4. Feature requests (top 5 requested features)
    5. Priority actions (recommendations for developers)
    
    Reviews: ${JSON.stringify(reviews)}
  `;
  
  const response = await openrouter.chat.completions.create({
    model: "anthropic/claude-3.5-sonnet",
    messages: [{ role: "user", content: prompt }],
  });
  
  return parseAIResponse(response);
}
```

### æˆæœ¬ä¼°ç®—

**å•æ¬¡åˆ†ææˆæœ¬ï¼š**
- è¾“å…¥ï¼š500 æ¡è¯„è®º Ã— å¹³å‡ 100 tokens = 50,000 tokens
- è¾“å‡ºï¼šåˆ†æç»“æœ ~2,000 tokens
- Claude 3.5 Sonnet æˆæœ¬ï¼š(50K Ã— $3 + 2K Ã— $15) / 1M = **$0.18/æ¬¡**

**æœˆåº¦æˆæœ¬ï¼ˆ100 æ¬¡åˆ†æ/å¤©ï¼‰ï¼š**
- 100 æ¬¡/å¤© Ã— 30 å¤© Ã— $0.18 = **$540/æœˆ**

### åŠ¨æ€æ¨¡å‹åˆ‡æ¢ï¼ˆæœªæ¥ï¼‰

```typescript
// æ•°æ®åº“é…ç½®
model AIModel {
  modelKey        String   @unique  // "claude-3.5-sonnet"
  provider        String             // "anthropic"
  apiModelName    String             // "anthropic/claude-3.5-sonnet"
  costInput       Float              // $3 per 1M tokens
  costOutput      Float              // $15 per 1M tokens
  isActive        Boolean  @default(true)
  priority        Int      @default(0)
}

// æ™ºèƒ½é€‰æ‹©
function selectBestModel(
  userPlan: 'free' | 'pro' | 'enterprise',
  reviewLanguage: string,
  reviewCount: number
): string {
  if (userPlan === 'free') return 'deepseek-v3';
  if (reviewLanguage === 'zh') return 'glm-4';
  if (reviewCount > 1000) return 'gpt-4o';
  return 'claude-3.5-sonnet';  // é»˜è®¤
}
```

---

## æ•°æ®æŠ“å–æ–¹æ¡ˆ

### iOS App Store

#### æ–¹æ¡ˆï¼šRSS Feed

**ä¼˜åŠ¿ï¼š**
- âœ… å®˜æ–¹æä¾›ï¼Œç¨³å®šå¯é 
- âœ… å®Œå…¨å…è´¹
- âœ… æ— éœ€ API Key
- âœ… ä¸å—åœ°åŸŸé™åˆ¶

**é™åˆ¶ï¼š**
- âš ï¸ æœ€å¤š 500 æ¡è¯„è®º
- âš ï¸ åªèƒ½æŒ‰æ—¶é—´æ’åº
- âš ï¸ æ— æ³•ç­›é€‰è¯„åˆ†

**å®ç°ï¼š**
```typescript
// src/lib/scrapers/app-store.ts
import Parser from 'rss-parser';

const RSS_URL = 'https://itunes.apple.com/rss/customerreviews/page={page}/id={appId}/sortby=mostrecent/json?l=en&cc=us';

export async function fetchAppStoreReviews(
  appId: string,
  country: string = 'us',
  page: number = 1
): Promise<Review[]> {
  const url = RSS_URL
    .replace('{appId}', appId)
    .replace('{page}', page.toString());
  
  const feed = await parser.parseURL(url);
  return feed.items.map(item => parseReview(item));
}
```

#### å¤šé¡µæŠ“å–

```typescript
export async function fetchAppStoreReviewsMultiPage(
  appId: string,
  country: string = 'us',
  maxPages: number = 5
): Promise<Review[]> {
  const allReviews = [];
  
  for (let page = 1; page <= maxPages; page++) {
    const reviews = await fetchAppStoreReviews(appId, country, page);
    if (reviews.length === 0) break;
    allReviews.push(...reviews);
    await delay(1000); // é™é€Ÿï¼š1ç§’/é¡µ
  }
  
  return allReviews;
}
```

---

### Android Google Play

#### æ–¹æ¡ˆï¼šgoogle-play-scraper

**ä¼˜åŠ¿ï¼š**
- âœ… å®Œå…¨å…è´¹
- âœ… å¯è·å–æ›´å¤šè¯„è®ºï¼ˆç†è®ºä¸Šæ— é™ï¼‰
- âœ… æ”¯æŒæ’åºï¼ˆæœ€æ–°/è¯„åˆ†/æœ‰ç”¨æ€§ï¼‰

**é™åˆ¶ï¼š**
- âš ï¸ éå®˜æ–¹ APIï¼ˆå¯èƒ½ä¸ç¨³å®šï¼‰
- âš ï¸ **åœ¨ä¸­å›½å¤§é™†æ— æ³•è®¿é—®**ï¼ˆè¢«å¢™ï¼‰
- âš ï¸ å¯èƒ½è¢« Google é™æµ

**å®ç°ï¼š**
```typescript
// src/lib/scrapers/google-play.ts
import gplay from 'google-play-scraper';

export async function fetchGooglePlayReviews(
  appId: string,
  options: {
    country?: string;
    num?: number;
    sort?: 'NEWEST' | 'RATING' | 'HELPFULNESS';
  } = {}
): Promise<Review[]> {
  const reviews = await gplay.reviews({
    appId,
    sort: gplay.sort[options.sort || 'NEWEST'],
    num: options.num || 500,
    country: options.country || 'us',
  });
  
  return reviews.data.map(r => parseReview(r));
}
```

#### ä¸­å›½å¤§é™†è§£å†³æ–¹æ¡ˆ

**é—®é¢˜ï¼š** Google Play è¢«å°é”ï¼ŒæŠ“å–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ 1ï¼šSerpApiï¼ˆæ¨èï¼‰**
```typescript
// ä½¿ç”¨ç¬¬ä¸‰æ–¹ API ç»•è¿‡é™åˆ¶
import { getJson } from 'serpapi';

const response = await getJson({
  engine: 'google_play_product',
  product_id: appId,
  api_key: process.env.SERPAPI_KEY,
});
```

**æˆæœ¬ï¼š** $50/æœˆï¼ˆ5000 æ¬¡æŸ¥è¯¢ï¼‰ï¼Œå…è´¹ 100 æ¬¡/æœˆ

**è§£å†³æ–¹æ¡ˆ 2ï¼šéƒ¨ç½²åˆ° Vercel**
- Vercel æœåŠ¡å™¨åœ¨æµ·å¤–ï¼Œæ— ç½‘ç»œé™åˆ¶
- å®Œå…¨å…è´¹
- æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ

---

## æ•°æ®åº“è®¾è®¡

### Schema æ¦‚è§ˆ

```prisma
// prisma/schema.prisma

// åº”ç”¨è¡¨
model App {
  id            Int       @id @default(autoincrement())
  platform      Platform  // ios | android
  appId         String    // App Store ID æˆ– Package Name
  name          String?
  iconUrl       String?
  rating        Float?
  reviewCount   Int?
  developer     String?
  
  reviews       Review[]
  
  @@unique([platform, appId])
  @@index([platform, appId])
}

// è¯„è®ºè¡¨
model Review {
  id           Int       @id @default(autoincrement())
  appId        Int
  app          App       @relation(fields: [appId], references: [id])
  
  platform     Platform
  reviewId     String    // å¹³å°åŸå§‹è¯„è®º ID
  author       String?
  rating       Int       // 1-5 æ˜Ÿ
  title        String?
  content      String
  reviewDate   DateTime
  appVersion   String?
  
  @@unique([platform, reviewId])
  @@index([appId, rating])
}

// åˆ†æä»»åŠ¡è¡¨
model AnalysisTask {
  id          String    @id @default(uuid())
  taskType    TaskType  // single | comparison
  status      TaskStatus @default(pending)
  progress    Int       @default(0)
  
  // URL slug (ç®€çŸ­ï¼ŒSEO å‹å¥½)
  appSlug     String?
  isLatest    Boolean   @default(true)
  
  // å®Œæ•´æ ‡è¯†ï¼ˆä¿è¯å”¯ä¸€æ€§ï¼‰
  platform    Platform?
  appStoreId  String?
  
  modelUsed   String?   // AI æ¨¡å‹æ ‡è¯†
  result      Json?     // åˆ†æç»“æœ
  
  createdAt   DateTime  @default(now())
  completedAt DateTime?
  
  @@index([appSlug, isLatest])
  @@index([platform, appStoreId, createdAt])
}
```

### å…³é”®è®¾è®¡å†³ç­–

#### 1. ä¸ºä»€ä¹ˆ `appSlug` ä¸æ˜¯å”¯ä¸€çš„ï¼Ÿ

**åŸå› ï¼š** åŒä¸€åº”ç”¨å¯èƒ½è¢«å¤šæ¬¡åˆ†æ

```sql
-- å…è®¸å¤šæ¡è®°å½•ä½¿ç”¨ç›¸åŒ slug
{ appSlug: "instagram-ios", createdAt: "2025-01-01", isLatest: false }
{ appSlug: "instagram-ios", createdAt: "2025-01-02", isLatest: true }

-- é€šè¿‡ isLatest æ ‡è®°æœ€æ–°åˆ†æ
WHERE appSlug = "instagram-ios" AND isLatest = true
```

#### 2. ä¸ºä»€ä¹ˆéœ€è¦ `(platform, appStoreId)` ç´¢å¼•ï¼Ÿ

**ç”¨é€”ï¼š** æŸ¥æ‰¾ç°æœ‰åˆ†æï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ–°å»º

```typescript
// æŸ¥æ‰¾æœ€è¿‘ 24 å°æ—¶å†…çš„åˆ†æ
const existing = await prisma.analysisTask.findFirst({
  where: {
    platform: 'ios',
    appStoreId: '389801252',
    isLatest: true,
    createdAt: { gte: new Date(Date.now() - 24 * 60 * 60 * 1000) }
  }
});

if (existing) {
  // å¤ç”¨ç°æœ‰åˆ†æï¼ˆèŠ‚çœæˆæœ¬ï¼‰
  return existing;
}
```

#### 3. ä¸ºä»€ä¹ˆè¯„è®ºå­˜å‚¨åœ¨å•ç‹¬çš„è¡¨ï¼Ÿ

**ä¼˜åŠ¿ï¼š**
- âœ… é¿å…é‡å¤å­˜å‚¨ï¼ˆå¤šæ¬¡åˆ†æå…±äº«è¯„è®ºï¼‰
- âœ… æ”¯æŒè¯„è®ºçº§åˆ«çš„æŸ¥è¯¢å’Œç­›é€‰
- âœ… æ–¹ä¾¿æœªæ¥æ‰©å±•ï¼ˆå¦‚æƒ…æ„Ÿæ ‡ç­¾ã€AI åˆ†ç±»ï¼‰

---

## API æ¥å£è®¾è®¡

### 1. POST /api/analyze

**ç”¨é€”ï¼š** å‘èµ·å•åº”ç”¨åˆ†æ

**è¯·æ±‚ï¼š**
```json
{
  "appUrl": "https://apps.apple.com/us/app/instagram/id389801252",
  "platform": "ios",
  "options": {
    "ratingFilter": [1, 2, 3]  // åªåˆ†æ 1-3 æ˜Ÿè¯„è®º
  }
}
```

**å“åº”ï¼ˆæˆåŠŸï¼‰ï¼š**
```json
{
  "taskId": "uuid-xxx",
  "appSlug": "instagram-ios",
  "status": "pending",
  "message": "Analysis started",
  "cached": false
}
```

**å“åº”ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰ï¼š**
```json
{
  "taskId": "uuid-xxx",
  "appSlug": "instagram-ios",
  "status": "completed",
  "message": "Using cached analysis",
  "cached": true,
  "createdAt": "2025-01-01T12:00:00Z"
}
```

---

### 2. GET /api/analyze?slug={slug}

**ç”¨é€”ï¼š** æŸ¥è¯¢åˆ†æç»“æœ

**è¯·æ±‚ï¼š**
```
GET /api/analyze?slug=instagram-ios
```

**å“åº”ï¼ˆå¤„ç†ä¸­ï¼‰ï¼š**
```json
{
  "taskId": "uuid-xxx",
  "appSlug": "instagram-ios",
  "status": "processing",
  "progress": 60
}
```

**å“åº”ï¼ˆå®Œæˆï¼‰ï¼š**
```json
{
  "taskId": "uuid-xxx",
  "appSlug": "instagram-ios",
  "status": "completed",
  "progress": 100,
  "result": {
    "app": {
      "name": "Instagram",
      "iconUrl": "...",
      "rating": 4.5,
      "reviewCount": 1000000
    },
    "reviewCount": 500,
    "analyzedCount": 300,
    "analysis": {
      "sentiment": {
        "positive": 40,
        "neutral": 30,
        "negative": 30
      },
      "criticalIssues": [...],
      "featureRequests": [...],
      "priorityActions": [...]
    },
    "reviews": [...]  // åŸå§‹è¯„è®ºæ•°æ®
  }
}
```

---

## ç¼“å­˜ç­–ç•¥

### 24 å°æ—¶æ™ºèƒ½ç¼“å­˜

**ç›®æ ‡ï¼š** èŠ‚çœ AI æˆæœ¬ï¼Œæå‡å“åº”é€Ÿåº¦

**å®ç°ï¼š**
```typescript
// æ£€æŸ¥æ˜¯å¦å­˜åœ¨ 24 å°æ—¶å†…çš„åˆ†æ
const existingAnalysis = await prisma.analysisTask.findFirst({
  where: {
    platform,
    appStoreId,
    isLatest: true,
    status: 'completed',
    createdAt: {
      gte: new Date(Date.now() - 24 * 60 * 60 * 1000)  // 24 å°æ—¶å‰
    }
  },
  orderBy: { createdAt: 'desc' }
});

if (existingAnalysis) {
  // ç«‹å³è¿”å›ç¼“å­˜ç»“æœï¼ˆ0 æˆæœ¬ï¼‰
  return {
    cached: true,
    result: existingAnalysis.result
  };
}

// å¦åˆ™ï¼Œåˆ›å»ºæ–°åˆ†æï¼ˆäº§ç”Ÿæˆæœ¬ï¼‰
```

### ç¼“å­˜å¤±æ•ˆç­–ç•¥

1. **æ—¶é—´å¤±æ•ˆï¼š** è¶…è¿‡ 24 å°æ—¶è‡ªåŠ¨å¤±æ•ˆ
2. **æ‰‹åŠ¨åˆ·æ–°ï¼š** ç”¨æˆ·å¯ä»¥å¼ºåˆ¶åˆ·æ–°ï¼ˆPro åŠŸèƒ½ï¼‰
3. **ç‰ˆæœ¬æ›´æ–°ï¼š** æ£€æµ‹åˆ° App æ–°ç‰ˆæœ¬è‡ªåŠ¨åˆ·æ–°ï¼ˆæœªæ¥ï¼‰

---

## æœªæ¥åŠŸèƒ½è§„åˆ’

### Phase 1: ç«å“å¯¹æ¯”ï¼ˆQ2 2025ï¼‰

**åŠŸèƒ½ï¼š**
- åŒæ—¶åˆ†æ 2-5 ä¸ªç«å“åº”ç”¨
- SWOT å¯¹æ¯”åˆ†æ
- å·®å¼‚åŒ–ä¼˜åŠ¿è¯†åˆ«

**API è®¾è®¡ï¼š**
```typescript
POST /api/compare
{
  "yourApp": { "appUrl": "...", "platform": "ios" },
  "competitors": [
    { "appUrl": "...", "platform": "ios" },
    { "appUrl": "...", "platform": "ios" }
  ]
}
```

---

### Phase 2: ç”¨æˆ·ç³»ç»Ÿï¼ˆQ3 2025ï¼‰

**åŠŸèƒ½ï¼š**
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- åˆ†æå†å²è®°å½•
- è®¢é˜…ç®¡ç†

**å•†ä¸šæ¨¡å¼ï¼š**
- **Free:** 5 æ¬¡åˆ†æ/æœˆ
- **Pro ($29/æœˆ):** æ— é™åˆ†æï¼Œç«å“å¯¹æ¯”
- **Enterprise ($299/æœˆ):** å›¢é˜Ÿåä½œï¼ŒAPI è®¿é—®

---

### Phase 3: é«˜çº§åŠŸèƒ½ï¼ˆQ4 2025ï¼‰

- âœ… å…³é”®è¯è¶‹åŠ¿åˆ†æ
- âœ… è‡ªåŠ¨ç›‘æ§å’Œå‘Šè­¦
- âœ… æ•°æ®å¯¼å‡ºï¼ˆPDF/Excelï¼‰
- âœ… API å¼€æ”¾å¹³å°

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[README.md](./README.md)** - é¡¹ç›®ä»‹ç»
- **[å¼€å‘æŒ‡å—.md](./å¼€å‘æŒ‡å—.md)** - å¼€å‘æ–‡æ¡£
- **[PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md)** - é¡¹ç›®ç»“æ„

---

## ğŸ”— å¤–éƒ¨èµ„æº

- **Next.js æ–‡æ¡£:** https://nextjs.org/docs
- **Prisma æ–‡æ¡£:** https://www.prisma.io/docs
- **OpenRouter API:** https://openrouter.ai/docs
- **Vercel éƒ¨ç½²:** https://vercel.com/docs

---

**æŠ€æœ¯é—®é¢˜ï¼Ÿ** æŸ¥çœ‹ [å¼€å‘æŒ‡å—.md - å¸¸è§é—®é¢˜](./å¼€å‘æŒ‡å—.md#å¸¸è§é—®é¢˜) ğŸš€

