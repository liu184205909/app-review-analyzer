# ğŸ“— App Review Analyzer - å¼€å‘æŒ‡å—

> AIé©±åŠ¨çš„åº”ç”¨è¯„è®ºåˆ†æå¹³å°å®Œæ•´å¼€å‘æ–‡æ¡£

**æœ€åæ›´æ–°ï¼š** 2025-11-06

---

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
2. [é¡¹ç›®å®‰è£…](#é¡¹ç›®å®‰è£…)
3. [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
4. [æ•°æ®åº“é…ç½®](#æ•°æ®åº“é…ç½®)
5. [å¯åŠ¨é¡¹ç›®](#å¯åŠ¨é¡¹ç›®)
6. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
7. [å¼€å‘åŠŸèƒ½æŒ‡å—](#å¼€å‘åŠŸèƒ½æŒ‡å—)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
9. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

---

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### å¿…éœ€è½¯ä»¶
- **Node.js**: 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm** æˆ– **yarn**
- **Git**
- **PostgreSQL**: æ•°æ®åº“
- **ä»£ç ç¼–è¾‘å™¨**: VS Codeï¼ˆæ¨èï¼‰

### å¼€å‘å·¥å…·æ¨è
- **VS Code æ‰©å±•**:
  - Prisma
  - Tailwind CSS
  - GitLens
  - Prettier

---

## ğŸš€ é¡¹ç›®å®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/app-review-analyzer.git
cd app-review-analyzer

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local

# 4. æ•°æ®åº“è®¾ç½®
npx prisma migrate dev

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### ç¯å¢ƒå˜é‡é…ç½® (`.env.local`)

```env
# æ•°æ®åº“è¿æ¥
DATABASE_URL="postgresql://username:password@localhost:5432/app-review-analyzer"

# AI æœåŠ¡é…ç½®
OPENROUTER_API_KEY="your-openrouter-api-key"
OPENAI_API_KEY="your-openai-api-key" # å¯é€‰

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆå¯é€‰ï¼‰
QSTASH_TOKEN="your-qstash-token"
REDIS_URL="your-redis-url"
```

### API å¯†é’¥è·å–

1. **OpenRouter API**:
   - è®¿é—® [OpenRouter](https://openrouter.ai)
   - æ³¨å†Œè´¦æˆ·å¹¶è·å– API Key
   - æ”¯æŒå¤šç§ AI æ¨¡å‹ (Claude, GPT-4, ç­‰)

2. **æ•°æ®åº“è¿æ¥**:
   - æœ¬åœ°å¼€å‘: ä½¿ç”¨æœ¬åœ° PostgreSQL
   - äº‘ç«¯éƒ¨ç½²: ä½¿ç”¨ Supabase æˆ– Railway

---

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### Prisma ORM

```bash
# ç”Ÿæˆ Prisma Client
npx prisma generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate dev

# é‡ç½®æ•°æ®åº“ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
npx prisma migrate reset
```

### æ•°æ®åº“æ¨¡å‹

```typescript
// æ ¸å¿ƒæ¨¡å‹
- AnalysisTask: åˆ†æä»»åŠ¡
- App: åº”ç”¨ä¿¡æ¯
- Review: è¯„è®ºæ•°æ®
- User: ç”¨æˆ·ï¼ˆé¢„ç•™ï¼‰
- Subscription: è®¢é˜…ï¼ˆé¢„ç•™ï¼‰
```

---

## ğŸƒâ€â™‚ï¸ å¯åŠ¨é¡¹ç›®

```bash
# å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# æ•°æ®åº“æ“ä½œ
npm run db:generate    # ç”Ÿæˆ Prisma Client
npm run db:migrate     # è¿è¡Œè¿ç§»
npm run db:reset       # é‡ç½®æ•°æ®åº“
npm run db:studio      # æ‰“å¼€ Prisma Studio
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
app-review-analyzer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (home)/            # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ analysis/          # åˆ†æç»“æœé¡µé¢
â”‚   â”‚   â”œâ”€â”€ browse/            # æµè§ˆé¡µé¢
â”‚   â”‚   â””â”€â”€ layout.tsx         # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ReviewList.tsx     # è¯„è®ºåˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ AnalysisCard.tsx   # åˆ†æå¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                   # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ prisma.ts          # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ scrapers/          # æ•°æ®æŠ“å–
â”‚   â”‚   â””â”€â”€ ai/               # AI åˆ†æ
â”‚   â””â”€â”€ types/                 # TypeScript ç±»å‹
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma          # æ•°æ®åº“æ¨¡å¼
â”‚   â””â”€â”€ migrations/            # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â””â”€â”€ docs/                      # æ–‡æ¡£
```

---

## ğŸ’» å¼€å‘åŠŸèƒ½æŒ‡å—

### æ–°å¢åˆ†æåŠŸèƒ½

1. **åˆ›å»ºæ–°ç»„ä»¶**:
   ```typescript
   // src/components/NewFeature.tsx
   export default function NewFeature() {
     return <div>æ–°åŠŸèƒ½å†…å®¹</div>
   }
   ```

2. **æ·»åŠ  API è·¯ç”±**:
   ```typescript
   // src/app/api/new-feature/route.ts
   import { NextResponse } from 'next/server';

   export async function GET() {
     return NextResponse.json({ message: 'æ–°åŠŸèƒ½API' });
   }
   ```

### æ·»åŠ æ–°å¹³å°æ”¯æŒ

1. **æ‰©å±•å¹³å°æšä¸¾**:
   ```typescript
   // prisma/schema.prisma
   enum Platform {
     ios
     android
     macos     // æ–°å¢
   }
   ```

2. **åˆ›å»ºæŠ“å–å™¨**:
   ```typescript
   // src/lib/scrapers/macos-store.ts
   export async function fetchMacOSReviews(appId: string) {
     // macOS æŠ“å–é€»è¾‘
   }
   ```

### AI åˆ†æåŠŸèƒ½æ‰©å±•

1. **æ‰©å±• AI æç¤º**:
   ```typescript
   // src/lib/ai/prompt.ts
   export function buildPrompt(reviews: Review[]) {
     return `
       åˆ†æä»¥ä¸‹è¯„è®ºæ•°æ®ï¼š
       ${reviews.map(r => r.content).join('\n')}

       è¯·æå–ï¼š
       1. æƒ…æ„Ÿåˆ†æ
       2. å…³é”®é—®é¢˜
       3. åŠŸèƒ½è¯·æ±‚
     `;
   }
   ```

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å¼€å‘

### è¯„è®ºæŠ“å–ä¼˜åŒ–

```typescript
// å¢é‡æŠ“å–ç­–ç•¥
async function incrementalFetch(taskId: string, appId: string) {
  const lastReview = await prisma.review.findFirst({
    where: { appId },
    orderBy: { reviewDate: 'desc' }
  });

  const newReviews = await fetchNewReviews(appId, lastReview?.reviewDate);

  // ä¿å­˜æ–°è¯„è®º
  await prisma.review.createMany({
    data: newReviews.map(review => ({
      ...review,
      taskId,
      isNew: true
    }))
  });
}
```

### ç¼“å­˜ç­–ç•¥

```typescript
// æ™ºèƒ½ç¼“å­˜é…ç½®
function getCacheDuration(reviewCount: number): number {
  if (reviewCount > 10000) return 1;     // 1å¤© - çƒ­é—¨åº”ç”¨
  if (reviewCount > 1000) return 7;     // 7å¤© - æ™®é€šåº”ç”¨
  if (reviewCount > 100) return 30;     // 30å¤© - å°ä¼—åº”ç”¨
  return 90;                           // 90å¤© - æå°ä¼—åº”ç”¨
}
```

### UI ç»„ä»¶å¼€å‘

```typescript
// å…¸å‹åˆ†æç»„ä»¶
interface AnalysisCardProps {
  analysis: AnalysisData;
  onExpand: () => void;
}

export default function AnalysisCard({ analysis, onExpand }: AnalysisCardProps) {
  return (
    <div className="bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow">
      <h3 className="text-lg font-semibold mb-2">{analysis.app.name}</h3>
      <div className="space-y-4">
        {/* åˆ†æå†…å®¹ */}
      </div>
      <button
        onClick={onExpand}
        className="mt-4 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700"
      >
        æŸ¥çœ‹è¯¦ç»†åˆ†æ
      </button>
    </div>
  );
}
```

---

## ğŸš¨ å¸¸è§é—®é¢˜

### æ•°æ®åº“è¿æ¥é—®é¢˜

```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
npx prisma db pull

# é‡ç½®æ•°æ®åº“
npx prisma migrate reset
```

### API è¶…æ—¶é—®é¢˜

```typescript
// ä½¿ç”¨ AbortController å¤„ç†è¶…æ—¶
const controller = new AbortController();
const timeoutId = setTimeout(() => controller.abort(), 10000);

const response = await fetch(url, {
  signal: controller.signal
});

clearTimeout(timeoutId);
```

### AI åˆ†æé”™è¯¯å¤„ç†

```typescript
try {
  const analysis = await analyzeReviews(reviews);
  return analysis;
} catch (error) {
  console.error('AIåˆ†æå¤±è´¥:', error);

  // é™çº§å¤„ç†
  return {
    sentiment: { positive: 0, negative: 0, neutral: 0 },
    issues: [],
    features: []
  };
}
```

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Vercel éƒ¨ç½²

```bash
# 1. å®‰è£… Vercel CLI
npm i -g vercel

# 2. éƒ¨ç½²é¡¹ç›®
vercel

# 3. é…ç½®ç¯å¢ƒå˜é‡
vercel env add DATABASE_URL
vercel env add OPENROUTER_API_KEY
```

### Docker éƒ¨ç½²

```dockerfile
# Dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]
```

```bash
# æ„å»ºå’Œè¿è¡Œ
docker build -t app-review-analyzer .
docker run -p 3000:3000 app-review-analyzer
```

---

## ğŸ” æµ‹è¯•æŒ‡å—

### å•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### API æµ‹è¯•

```bash
# æµ‹è¯• API ç«¯ç‚¹
curl http://localhost:3000/api/health
```

---

## ğŸ“ å¼€å‘æœ€ä½³å®è·µ

### ä»£ç è§„èŒƒ

1. **TypeScript ä¸¥æ ¼æ¨¡å¼**
2. **ESLint + Prettier**
3. **ç»„ä»¶å‘½å**: PascalCase
4. **å‡½æ•°å‘½å**: camelCase

### æäº¤è§„èŒƒ

```bash
# æäº¤æ ¼å¼
git commit -m "feat: æ·»åŠ å…³é”®è¯äº‘å›¾åŠŸèƒ½"

# ç±»å‹å‰ç¼€
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤
docs: æ–‡æ¡£
style: æ ¼å¼
refactor: é‡æ„
test: æµ‹è¯•
chore: å…¶ä»–
```

### åˆ†æ”¯ç®¡ç†

```bash
# åŠŸèƒ½å¼€å‘åˆ†æ”¯
git checkout -b feature/keyword-cloud
git add .
git commit -m "feat: æ·»åŠ å…³é”®è¯äº‘å›¾"
git push origin feature/keyword-cloud
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²

```typescript
// åŠ¨æ€å¯¼å…¥å¤§å‹ç»„ä»¶
const WordCloud = dynamic(() => import('../components/WordCloud'), {
  loading: () => <div>åŠ è½½ä¸­...</div>
});
```

### æ•°æ®åº“ä¼˜åŒ–

```sql
-- æ·»åŠ ç´¢å¼•æé«˜æŸ¥è¯¢æ€§èƒ½
CREATE INDEX idx_review_appId_date ON Review(appId, reviewDate);
CREATE INDEX idx_task_status_created ON AnalysisTask(status, createdAt);
```

---

## ğŸ”— ç›¸å…³èµ„æº

### æŠ€æœ¯æ–‡æ¡£
- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Prisma æ–‡æ¡£](https://www.prisma.io/docs)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)

### API æ–‡æ¡£
- [OpenRouter API](https://openrouter.ai/docs)
- [Google Play Scraper](https://github.com/facundoolano/google-play-scraper)

### ç¤ºä¾‹é¡¹ç›®
- [Next.js AI App](https://github.com/vercel/ai-chatbot)
- [Prisma Example](https://github.com/prisma/prisma-examples)

---

## ğŸ“ è·å–å¸®åŠ©

### ç¤¾åŒºæ”¯æŒ
- [GitHub Issues](https://github.com/your-username/app-review-analyzer/issues)
- [Discord é¢‘é“](https://discord.gg/your-channel)

### è”ç³»æ–¹å¼
- **æŠ€æœ¯æ”¯æŒ**: [your-email@example.com]
- **åŠŸèƒ½å»ºè®®**: [your-feedback@platform.com]

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**æœ€åæ›´æ–°**: 2025-11-06
**ä¸‹æ¬¡æ›´æ–°**: åŠŸèƒ½æ›´æ–°ååŒæ­¥